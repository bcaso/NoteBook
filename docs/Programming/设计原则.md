---
title: 设计原则
tags: Unity
grammar_cjkRuby: true
---
[TOC]

# 游戏设计原则
图形学，opengl，图形学，算法

## 单一职责
一个类只做一件事，一个玩家，比如有行走控制，动画控制，声音控制，位移控制。
**拆分为多个类**。

## 开闭原则(总原则)
```csharp
public class Person{
    int age = 10;
}

Person tempPerson = new Person();
tempPerson.age = 20;
```
上面代码中直接修改了另一个类中的成员变量的值。不符合开闭原则。

访问器或者封装一个方法（接口）供外界调用，间接实现修改成员变量值的目的。

原因：方便修改，如果策划要求某个值要变化10倍，那么可能就需要全局搜索，并一个个的修改。
如果是封装成了一个接口（方法），那么只需要修改这个方法。
### 代码重构原则
* 不要轻易删除原代码
* 不要轻易修改原代码
* 尽量新定义一个方法，可把旧方法添加 弃用 属性，待新方法测试通过后，逐步替换旧方法，少造新Bug

## 依赖倒置原则
1. 先了解需求
2. 先画图
3. 变成代码
不符合以上顺序即违反了依赖倒置原则。
游戏一大抄，做之前可先询问游戏原型，即更了解需求。

## 接口隔离原则（接口单一原则）
```csharp
namespace UnityEngine.EventSystems{
    public interface IDragHandler : IEventSystemHandler{
        void onDrag{PointerEventData eventData};
    }
    
}
```
如上，`IDrageHandler`这个接口只包含了拖拽方法，另外还有开始拖拽，结束拖拽，都单独的成为一个接口。

因为继承某个接口，需要实现其全部方法。

## 里氏转换原则：
不要修改别人代码，重写父类的代码，然后在子类中重写它。

多态：**父类的指针指向子类，而调用子类的方法。**
```csharp
Parent tempParent = new Son();
tempParent.Say();//调用的是子类中的方法
```

## 合成复用原则
https://blog.csdn.net/LoveLion/article/details/7563441

>合成复用原则就是在一个新的对象里通过关联关系（包括组合关系和聚合关系）来使用一些已有的对象，使之成为新对象的一部分；**新对象通过委派调用已有对象的方法达到复用功能的目的**。简言之：复用时要尽量使用组合/聚合关系（关联关系），少用继承。

https://www.cnblogs.com/shaosks/archive/2012/02/08/2342593.html#undefined
>组合/聚合和继承是实现复用的两个基本途径。合成复用原则是指尽量使用合成/聚合，而不是使用继承。
只有当以下的条件全部被满足时，才应当使用继承关系。

1.子类是超类的一个特殊种类，而不是超类的一个角色，也就是区分“Has-A”和“Is-A”.只有“Is-A”关系才符合继承关系，“Has-A”关系应当使用聚合来描述。

2.永远不会出现需要将子类换成另外一个类的子类的情况。如果不能肯定将来是否会变成另外一个子类的话，就不要使用继承。

3.子类具有扩展超类的责任，而不是具有置换掉或注销掉超类的责任。如果一个子类需要大量的置换掉超类的行为，那么这个类就不应该是这个超类的子类。

## 迪米特法则
最小知识原则